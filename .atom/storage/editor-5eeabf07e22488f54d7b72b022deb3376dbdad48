{"mode":"editor","version":1,"windowDimensions":{"x":4,"y":23,"width":1676,"height":1024,"maximized":true},"grammars":{"deserializer":"GrammarRegistry","grammarOverridesByPath":{}},"project":{"paths":["/Users/omar/workspace/xinamon/ihouse"],"buffers":[{"text":"# encoding: UTF-8\nclass BudgetReport < Prawn::Document\n\n  def create_pdf(filename)\n    output_path\n    ensure_path\n    self.render_file(output_path + filename)\n  end\n\n  ## Modulo PDF - Genera un directorio para dejar el pdf\n  def output_path\n    @output_path = 'public/reports/'#APP_CONFIG['PDF_DIRECTORY']\n    @output_path\n  end\n\n  def ensure_path\n    FileUtils.mkdir_p(output_path)\n  end\n\n  def remove_file\n    FileUtils.rm_f(File.join(output_path,filename))\n  end\n\n  def filename(nr_client)\n    #  quoteDate = Time.now\n    @output_file = nr_client +'.pdf'\n  end\n\n  def get_file(nr_client)\n    File.read(filename(nr_client))\n  end\n\n  def package_to_pdf(budget)\n    font(\"Helvetica\", :size => 10) do\n      write_document(budget)\n    end\n  end\n\n  def write_document(budget)\n    image \"app/assets/images/budget_report_header.jpg\", :width => 520, :at => [0, bounds.top]\n    move_down 140\n\n    text_box \"Maldonado, \" + I18n.l(Date.today, :format => :long), :at => [290,cursor], :inline_format => true\n    add_lines(2)\n    text_box \"Sres.\", :at => [20,cursor], :inline_format => true\n    new_line\n    text_box \"FLIA. \" + budget.address.client.name, :at => [20,cursor], :inline_format => true\n    new_line\n    text_box \"Presente.- \", :at => [20,cursor], :inline_format => true\n    new_line\n    text_box \"Ref.: Presupuesto Nro. \" + budget.id.to_s, :at => [230,cursor], :inline_format => true\n    add_lines(2)\n    text_box \"De nuestra consideración:\", :at => [20,cursor], :inline_format => true\n    new_line\n    text \"De acuerdo a vuestra solicitud, cotizamos nuestros servicios de CONTROL DE PLAGAS.\", :indent_paragraphs => 130, :inline_format => true\n    add_lines(2)\n\n    write_objetivo(budget)\n    write_plagas(budget)\n    write_areas_a_tratar(budget)\n    write_metodologia(budget)\n    write_informacion_tecnica(budget)\n    write_garantias(budget)\n    write_aplicaciones(budget)\n    write_habilitaciones(budget)\n    write_precauciones(budget)\n    write_precios(budget)\n    write_forma_de_pago(budget)\n\n    # image \"app/assets/images/budget_report_footer.jpg\", :width => 520, :at => [0, 100]\n\n  end\n\n  def write_objetivo(budget)\n    text_box \"- OBJETIVO.\", :at => [20,cursor], :style => :bold\n    new_line\n\n    formatted_text_box ([ { :text => \"Implementar un Plan de Manejo Integrado de Plagas divido en 2 fases:\" },\n      { :text => \"\\nFase Inicial: \", :styles => [:underline] },\n      { :text => \"Controlar las plagas que significan una molestia y una amenaza a la salud de los ocupantes del la vivienda o local.\"},\n      { :text => \"\\nFase Mantenimiento: \", :styles => [:underline] },\n      { :text => \"Posteriormente al control inicial y pasado el período de la garantía inicial, se deberá realizar un mantenimiento periódico que evite la reinstalación de estas plagas en las áreas protegidas.\"}\n      ]), :at => [50,cursor], :width => 450\n      add_lines(6)\n  end\n\n  def write_plagas(budget)\n    text_box \"- PLAGAS A CONTROLAR.\", :at => [20,cursor], :style => :bold\n    new_line\n\n    budget.budget_model.budget_model_plague_groups.each do |bmpg|\n      write_budget_model_plague_group(bmpg)\n    end\n  end\n\n  def write_budget_model_plague_group(bmpg)\n    unless bmpg.total?\n      bounding_box [50, cursor], :width => 450, :inline_format => true do\n        text \"<u>\" + bmpg.title + \"</u>\", :inline_format => true\n        /\n        bmpg.plagues.each do |plague|\n          text plague.name.capitalize, :inline_format => true\n        end\n        /\n      end\n    end\n  end\n\n  def write_areas_a_tratar(budget)\n    text_box \"- ÁREAS A SER TRATADAS.\", :at => [20,cursor], :style => :bold, :inline_format => true\n    new_line\n    bounding_box [50, cursor], :width => 450, :inline_format => true do\n      text budget.address.text, :inline_format => true\n      budget.budget_model.budget_model_plague_groups.each do |bmpg|\n        unless bmpg.total?\n          text bmpg.areas.present? ? bmpg.areas : \"Sin area definida\", :inline_format => true\n        end\n      end\n    end\n    new_line\n  end\n\n  def write_metodologia(budget)\n    text_box \"- METODOLOGÍA DE TRABAJO.\", :at => [20,cursor], :style => :bold, :inline_format => true\n    new_line\n    bounding_box [50, cursor], :width => 450, :inline_format => true do\n      text budget.budget_model.methodology, :inline_format => true\n    end\n    new_line\n  end\n\n  def write_informacion_tecnica(budget)\n    text_box \"- INFORMACIÓN TÉCNICA.\", :at => [20,cursor], :style => :bold, :inline_format => true\n    new_line\n    bounding_box [50, cursor], :width => 450, :inline_format => true do\n      text \"Por mayor informacion sobre alguna de estas plagas y sus tratamientos haga click sobre el nombre de la o las mismas o solicítela a nuestro Dpto. Técnico por e-mail a: info@integralhouse.com\",\n      :inline_format => true\n    end\n\n    new_line\n\n  end\n\n  def write_garantias(budget)\n    text_box \"- GARANTIAS.\", :at => [20,cursor], :style => :bold, :inline_format => true\n    new_line\n    bounding_box [50, cursor], :width => 450, :inline_format => true do\n      text \"El tratamiento de la <u>Fase Inicial</u> tiene una garantía de 2 MESES, a partir del tratamiento inicial.\",\n      :inline_format => true\n      text \"La <u>Fase Mantenimiento</u> posterior prolongará la garantía por bimestres, siempre que se haga dentro de los 10 días posteriores al vencimiento de la garantía anterior.\",\n      :inline_format => true\n    end\n\n  end\n\n  def write_aplicaciones(budget)\n    text_box \"- APLICACIONES.\", :at => [20,cursor], :style => :bold, :inline_format => true\n    new_line\n  end\n\n  def write_habilitaciones(budget)\n    text_box \"- HABILITACIONES.\", :at => [20,cursor], :style => :bold, :inline_format => true\n    new_line\n    bounding_box [50, cursor], :width => 450, :inline_format => true do\n      text \"INTEGRAL HOUSE cuenta con las habilitaciones correspondientes al M.S.P. e I.M. de M.\",\n      :inline_format => true\n    end\n\n  end\n\n  def write_precauciones(budget)\n    new_line\n    text_box \"- PRECAUCIONES.\", :at => [20,cursor], :style => :bold, :inline_format => true\n    new_line\n    bounding_box [50, cursor], :width => 450, :inline_format => true do\n      text \"Se adjunta cartillas de precauciones.\",\n      :inline_format => true\n    end\n\n    new_line\n  end\n\n  def write_precios(budget)\n    text_box \"- PRECIOS.\", :at => [20,cursor], :style => :bold, :inline_format => true\n    new_line\n\n    budget.budget_model.budget_model_plague_groups.each do |bmpg|\n      bounding_box [50, cursor], :width => 450, :inline_format => true do\n        if bmpg.total?\n          text \"Tratamiento Fase Inicial: $ \" + bmpg.price_initial_phase.to_s, :inline_format => true\n          text \"Fase Mantenimiento cada 2 meses (opcional): $ \" + bmpg.price_maintenance.to_s, :inline_format => true\n        end\n      end\n    end\n  end\n\n  def write_forma_de_pago(budget)\n    new_line\n    text_box \"- FORMA DE PAGO.\", :at => [20,cursor], :style => :bold, :inline_format => true\n    new_line\n\n    bounding_box [50, cursor], :width => 450, :inline_format => true do\n      text \"Tratamiento Fase Inicial: Contado.\", :inline_format => true\n      text \"Fase Mantenimiento: Al momento de realizar dicho mantenimiento.\", :inline_format => true\n    end\n\n\n  end\n\n  def new_line\n    add_lines(1)\n  end\n\n  def add_lines(number_of_lines)\n    move_down (15*number_of_lines)\n  end\n\nend\n","markerStore":{"nextMarkerId":27770,"markersById":{"437":{"range":{"start":{"row":34,"column":20},"end":{"row":34,"column":27}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"664":{"range":{"start":{"row":34,"column":0},"end":{"row":35,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"665":{"range":{"start":{"row":37,"column":0},"end":{"row":37,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"666":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"667":{"range":{"start":{"row":208,"column":0},"end":{"row":208,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"668":{"range":{"start":{"row":208,"column":0},"end":{"row":208,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"669":{"range":{"start":{"row":208,"column":0},"end":{"row":208,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"670":{"range":{"start":{"row":208,"column":0},"end":{"row":208,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"671":{"range":{"start":{"row":208,"column":0},"end":{"row":208,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"672":{"range":{"start":{"row":209,"column":2},"end":{"row":217,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"676":{"range":{"start":{"row":24,"column":0},"end":{"row":24,"column":27}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"677":{"range":{"start":{"row":25,"column":0},"end":{"row":25,"column":36}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"678":{"range":{"start":{"row":211,"column":0},"end":{"row":211,"column":5}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1439":{"range":{"start":{"row":3,"column":0},"end":{"row":3,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1440":{"range":{"start":{"row":6,"column":0},"end":{"row":6,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1441":{"range":{"start":{"row":18,"column":0},"end":{"row":19,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1442":{"range":{"start":{"row":34,"column":0},"end":{"row":35,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1443":{"range":{"start":{"row":38,"column":0},"end":{"row":39,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1444":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1445":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1446":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1447":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1448":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1449":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1450":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1451":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1452":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1453":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1454":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1455":{"range":{"start":{"row":68,"column":0},"end":{"row":68,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1456":{"range":{"start":{"row":70,"column":0},"end":{"row":70,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1457":{"range":{"start":{"row":209,"column":2},"end":{"row":209,"column":2}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1458":{"range":{"start":{"row":209,"column":2},"end":{"row":212,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1459":{"range":{"start":{"row":213,"column":0},"end":{"row":215,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1495":{"range":{"start":{"row":24,"column":0},"end":{"row":24,"column":27}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"1496":{"range":{"start":{"row":25,"column":0},"end":{"row":25,"column":36}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11155":{"range":{"start":{"row":2,"column":0},"end":{"row":2,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11156":{"range":{"start":{"row":3,"column":0},"end":{"row":4,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11157":{"range":{"start":{"row":6,"column":0},"end":{"row":6,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11158":{"range":{"start":{"row":24,"column":0},"end":{"row":25,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11159":{"range":{"start":{"row":34,"column":0},"end":{"row":35,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11160":{"range":{"start":{"row":38,"column":0},"end":{"row":39,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11161":{"range":{"start":{"row":56,"column":0},"end":{"row":84,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11162":{"range":{"start":{"row":74,"column":0},"end":{"row":84,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11163":{"range":{"start":{"row":84,"column":0},"end":{"row":87,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11164":{"range":{"start":{"row":92,"column":0},"end":{"row":92,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11165":{"range":{"start":{"row":108,"column":0},"end":{"row":109,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11166":{"range":{"start":{"row":120,"column":0},"end":{"row":121,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11167":{"range":{"start":{"row":122,"column":0},"end":{"row":123,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11168":{"range":{"start":{"row":129,"column":0},"end":{"row":130,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11169":{"range":{"start":{"row":131,"column":0},"end":{"row":132,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11170":{"range":{"start":{"row":136,"column":0},"end":{"row":137,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11171":{"range":{"start":{"row":137,"column":0},"end":{"row":137,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11172":{"range":{"start":{"row":138,"column":0},"end":{"row":138,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11173":{"range":{"start":{"row":140,"column":0},"end":{"row":144,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11174":{"range":{"start":{"row":148,"column":0},"end":{"row":149,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11175":{"range":{"start":{"row":150,"column":0},"end":{"row":151,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11176":{"range":{"start":{"row":153,"column":0},"end":{"row":156,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11177":{"range":{"start":{"row":158,"column":0},"end":{"row":159,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11178":{"range":{"start":{"row":160,"column":0},"end":{"row":161,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11179":{"range":{"start":{"row":165,"column":0},"end":{"row":166,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11180":{"range":{"start":{"row":168,"column":0},"end":{"row":171,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11181":{"range":{"start":{"row":176,"column":0},"end":{"row":177,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11182":{"range":{"start":{"row":180,"column":0},"end":{"row":183,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11183":{"range":{"start":{"row":189,"column":0},"end":{"row":191,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11184":{"range":{"start":{"row":192,"column":0},"end":{"row":192,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11185":{"range":{"start":{"row":194,"column":0},"end":{"row":195,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11186":{"range":{"start":{"row":196,"column":0},"end":{"row":197,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11187":{"range":{"start":{"row":205,"column":0},"end":{"row":205,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11188":{"range":{"start":{"row":206,"column":0},"end":{"row":206,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11189":{"range":{"start":{"row":209,"column":0},"end":{"row":212,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11190":{"range":{"start":{"row":213,"column":0},"end":{"row":215,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11194":{"range":{"start":{"row":25,"column":0},"end":{"row":25,"column":36}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11231":{"range":{"start":{"row":2,"column":0},"end":{"row":2,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11232":{"range":{"start":{"row":3,"column":0},"end":{"row":4,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11233":{"range":{"start":{"row":6,"column":0},"end":{"row":6,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11234":{"range":{"start":{"row":24,"column":0},"end":{"row":25,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11235":{"range":{"start":{"row":34,"column":0},"end":{"row":35,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11236":{"range":{"start":{"row":38,"column":0},"end":{"row":39,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11237":{"range":{"start":{"row":56,"column":0},"end":{"row":84,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11238":{"range":{"start":{"row":74,"column":0},"end":{"row":84,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11239":{"range":{"start":{"row":84,"column":0},"end":{"row":87,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11240":{"range":{"start":{"row":92,"column":0},"end":{"row":92,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11241":{"range":{"start":{"row":108,"column":0},"end":{"row":109,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11242":{"range":{"start":{"row":120,"column":0},"end":{"row":121,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11243":{"range":{"start":{"row":122,"column":0},"end":{"row":123,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11244":{"range":{"start":{"row":129,"column":0},"end":{"row":130,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11245":{"range":{"start":{"row":131,"column":0},"end":{"row":132,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11246":{"range":{"start":{"row":136,"column":0},"end":{"row":137,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11247":{"range":{"start":{"row":137,"column":0},"end":{"row":137,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11248":{"range":{"start":{"row":138,"column":0},"end":{"row":138,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11249":{"range":{"start":{"row":140,"column":0},"end":{"row":144,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11250":{"range":{"start":{"row":148,"column":0},"end":{"row":149,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11251":{"range":{"start":{"row":150,"column":0},"end":{"row":151,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11252":{"range":{"start":{"row":153,"column":0},"end":{"row":156,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11253":{"range":{"start":{"row":158,"column":0},"end":{"row":159,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11254":{"range":{"start":{"row":160,"column":0},"end":{"row":161,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11255":{"range":{"start":{"row":165,"column":0},"end":{"row":166,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11256":{"range":{"start":{"row":168,"column":0},"end":{"row":171,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11257":{"range":{"start":{"row":176,"column":0},"end":{"row":177,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11258":{"range":{"start":{"row":180,"column":0},"end":{"row":183,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11259":{"range":{"start":{"row":189,"column":0},"end":{"row":191,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11260":{"range":{"start":{"row":192,"column":0},"end":{"row":192,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11261":{"range":{"start":{"row":194,"column":0},"end":{"row":195,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11262":{"range":{"start":{"row":196,"column":0},"end":{"row":197,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11263":{"range":{"start":{"row":205,"column":0},"end":{"row":205,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11264":{"range":{"start":{"row":206,"column":0},"end":{"row":206,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11265":{"range":{"start":{"row":209,"column":0},"end":{"row":212,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11266":{"range":{"start":{"row":213,"column":0},"end":{"row":215,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"11267":{"range":{"start":{"row":25,"column":0},"end":{"row":25,"column":36}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"12819":{"range":{"start":{"row":74,"column":0},"end":{"row":84,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap","maintainHistory":true},"14329":{"range":{"start":{"row":74,"column":0},"end":{"row":84,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap","maintainHistory":true},"15480":{"range":{"start":{"row":74,"column":0},"end":{"row":84,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap","maintainHistory":true},"15862":{"range":{"start":{"row":74,"column":0},"end":{"row":84,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap","maintainHistory":true},"16416":{"range":{"start":{"row":74,"column":0},"end":{"row":84,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap","maintainHistory":true},"24388":{"range":{"start":{"row":76,"column":0},"end":{"row":83,"column":18}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap","maintainHistory":true},"24871":{"range":{"start":{"row":76,"column":0},"end":{"row":83,"column":18}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap","maintainHistory":true},"26509":{"range":{"start":{"row":3,"column":0},"end":{"row":3,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26510":{"range":{"start":{"row":6,"column":0},"end":{"row":6,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26511":{"range":{"start":{"row":10,"column":0},"end":{"row":10,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26512":{"range":{"start":{"row":12,"column":0},"end":{"row":12,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26513":{"range":{"start":{"row":24,"column":0},"end":{"row":25,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26514":{"range":{"start":{"row":34,"column":0},"end":{"row":35,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26515":{"range":{"start":{"row":38,"column":0},"end":{"row":39,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26516":{"range":{"start":{"row":55,"column":0},"end":{"row":55,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26517":{"range":{"start":{"row":57,"column":0},"end":{"row":75,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26518":{"range":{"start":{"row":76,"column":0},"end":{"row":88,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26519":{"range":{"start":{"row":92,"column":0},"end":{"row":92,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26520":{"range":{"start":{"row":108,"column":0},"end":{"row":109,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26521":{"range":{"start":{"row":120,"column":0},"end":{"row":121,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26522":{"range":{"start":{"row":122,"column":0},"end":{"row":123,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26523":{"range":{"start":{"row":129,"column":0},"end":{"row":130,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26524":{"range":{"start":{"row":131,"column":0},"end":{"row":132,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26525":{"range":{"start":{"row":136,"column":0},"end":{"row":137,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26526":{"range":{"start":{"row":137,"column":0},"end":{"row":137,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26527":{"range":{"start":{"row":138,"column":0},"end":{"row":138,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26528":{"range":{"start":{"row":140,"column":0},"end":{"row":144,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26529":{"range":{"start":{"row":148,"column":0},"end":{"row":149,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26530":{"range":{"start":{"row":150,"column":0},"end":{"row":151,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26531":{"range":{"start":{"row":153,"column":0},"end":{"row":156,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26532":{"range":{"start":{"row":158,"column":0},"end":{"row":159,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26533":{"range":{"start":{"row":160,"column":0},"end":{"row":161,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26534":{"range":{"start":{"row":165,"column":0},"end":{"row":166,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26535":{"range":{"start":{"row":168,"column":0},"end":{"row":171,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26536":{"range":{"start":{"row":176,"column":0},"end":{"row":177,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26537":{"range":{"start":{"row":180,"column":0},"end":{"row":183,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26538":{"range":{"start":{"row":189,"column":0},"end":{"row":191,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26539":{"range":{"start":{"row":192,"column":0},"end":{"row":192,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26540":{"range":{"start":{"row":194,"column":0},"end":{"row":195,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26541":{"range":{"start":{"row":196,"column":0},"end":{"row":197,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26542":{"range":{"start":{"row":205,"column":0},"end":{"row":205,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26543":{"range":{"start":{"row":206,"column":0},"end":{"row":206,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26544":{"range":{"start":{"row":209,"column":0},"end":{"row":212,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26545":{"range":{"start":{"row":213,"column":0},"end":{"row":215,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"26546":{"range":{"start":{"row":25,"column":0},"end":{"row":25,"column":36}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27081":{"range":{"start":{"row":83,"column":15},"end":{"row":83,"column":17}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"27206":{"range":{"start":{"row":25,"column":33},"end":{"row":25,"column":33}},"properties":{"type":"selection","editorId":4,"goalScreenRange":null,"preserveFolds":true},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"27648":{"range":{"start":{"row":3,"column":0},"end":{"row":3,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27649":{"range":{"start":{"row":6,"column":0},"end":{"row":6,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27650":{"range":{"start":{"row":10,"column":0},"end":{"row":10,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27651":{"range":{"start":{"row":12,"column":0},"end":{"row":12,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27652":{"range":{"start":{"row":24,"column":0},"end":{"row":25,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27653":{"range":{"start":{"row":34,"column":0},"end":{"row":35,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27654":{"range":{"start":{"row":38,"column":0},"end":{"row":39,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27655":{"range":{"start":{"row":55,"column":0},"end":{"row":55,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27656":{"range":{"start":{"row":57,"column":0},"end":{"row":75,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27657":{"range":{"start":{"row":76,"column":0},"end":{"row":88,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27658":{"range":{"start":{"row":92,"column":0},"end":{"row":92,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27659":{"range":{"start":{"row":95,"column":0},"end":{"row":109,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27660":{"range":{"start":{"row":120,"column":0},"end":{"row":121,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27661":{"range":{"start":{"row":122,"column":0},"end":{"row":123,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27662":{"range":{"start":{"row":129,"column":0},"end":{"row":130,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27663":{"range":{"start":{"row":131,"column":0},"end":{"row":132,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27664":{"range":{"start":{"row":136,"column":0},"end":{"row":137,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27665":{"range":{"start":{"row":137,"column":0},"end":{"row":137,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27666":{"range":{"start":{"row":138,"column":0},"end":{"row":138,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27667":{"range":{"start":{"row":140,"column":0},"end":{"row":144,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27668":{"range":{"start":{"row":148,"column":0},"end":{"row":149,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27669":{"range":{"start":{"row":150,"column":0},"end":{"row":151,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27670":{"range":{"start":{"row":153,"column":0},"end":{"row":156,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27671":{"range":{"start":{"row":158,"column":0},"end":{"row":159,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27672":{"range":{"start":{"row":160,"column":0},"end":{"row":161,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27673":{"range":{"start":{"row":165,"column":0},"end":{"row":166,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27674":{"range":{"start":{"row":168,"column":0},"end":{"row":171,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27675":{"range":{"start":{"row":176,"column":0},"end":{"row":177,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27676":{"range":{"start":{"row":180,"column":0},"end":{"row":183,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27677":{"range":{"start":{"row":189,"column":0},"end":{"row":191,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27678":{"range":{"start":{"row":192,"column":0},"end":{"row":192,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27679":{"range":{"start":{"row":194,"column":0},"end":{"row":195,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27680":{"range":{"start":{"row":196,"column":0},"end":{"row":197,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27681":{"range":{"start":{"row":205,"column":0},"end":{"row":205,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27682":{"range":{"start":{"row":206,"column":0},"end":{"row":206,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27683":{"range":{"start":{"row":209,"column":0},"end":{"row":211,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27684":{"range":{"start":{"row":213,"column":0},"end":{"row":215,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27691":{"range":{"start":{"row":25,"column":0},"end":{"row":25,"column":36}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27729":{"range":{"start":{"row":3,"column":0},"end":{"row":3,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27730":{"range":{"start":{"row":6,"column":0},"end":{"row":6,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27731":{"range":{"start":{"row":10,"column":0},"end":{"row":10,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27732":{"range":{"start":{"row":12,"column":0},"end":{"row":12,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27733":{"range":{"start":{"row":24,"column":0},"end":{"row":25,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27734":{"range":{"start":{"row":34,"column":0},"end":{"row":35,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27735":{"range":{"start":{"row":38,"column":0},"end":{"row":39,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27736":{"range":{"start":{"row":55,"column":0},"end":{"row":55,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27737":{"range":{"start":{"row":57,"column":0},"end":{"row":75,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27738":{"range":{"start":{"row":76,"column":0},"end":{"row":88,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27739":{"range":{"start":{"row":92,"column":0},"end":{"row":92,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27740":{"range":{"start":{"row":95,"column":0},"end":{"row":109,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27741":{"range":{"start":{"row":120,"column":0},"end":{"row":121,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27742":{"range":{"start":{"row":122,"column":0},"end":{"row":123,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27743":{"range":{"start":{"row":129,"column":0},"end":{"row":130,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27744":{"range":{"start":{"row":131,"column":0},"end":{"row":132,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27745":{"range":{"start":{"row":136,"column":0},"end":{"row":137,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27746":{"range":{"start":{"row":137,"column":0},"end":{"row":137,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27747":{"range":{"start":{"row":138,"column":0},"end":{"row":138,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27748":{"range":{"start":{"row":140,"column":0},"end":{"row":144,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27749":{"range":{"start":{"row":148,"column":0},"end":{"row":149,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27750":{"range":{"start":{"row":150,"column":0},"end":{"row":151,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27751":{"range":{"start":{"row":153,"column":0},"end":{"row":156,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27752":{"range":{"start":{"row":158,"column":0},"end":{"row":159,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27753":{"range":{"start":{"row":160,"column":0},"end":{"row":161,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27754":{"range":{"start":{"row":165,"column":0},"end":{"row":166,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27755":{"range":{"start":{"row":168,"column":0},"end":{"row":171,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27756":{"range":{"start":{"row":176,"column":0},"end":{"row":177,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27757":{"range":{"start":{"row":180,"column":0},"end":{"row":183,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27758":{"range":{"start":{"row":189,"column":0},"end":{"row":191,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27759":{"range":{"start":{"row":192,"column":0},"end":{"row":192,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27760":{"range":{"start":{"row":194,"column":0},"end":{"row":195,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27761":{"range":{"start":{"row":196,"column":0},"end":{"row":197,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27762":{"range":{"start":{"row":205,"column":0},"end":{"row":205,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27763":{"range":{"start":{"row":206,"column":0},"end":{"row":206,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27764":{"range":{"start":{"row":209,"column":0},"end":{"row":211,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27765":{"range":{"start":{"row":213,"column":0},"end":{"row":215,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"27767":{"range":{"start":{"row":25,"column":0},"end":{"row":25,"column":36}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":2,"nextCheckpointId":3334,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/omar/workspace/xinamon/ihouse/app/reports/budget_report.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"8e5d7ae9f3fc434776c80e93533dd86a2e7a5892","deserializer":"TextBuffer","version":2},{"text":"class BudgetModelPlagueGroup < ActiveRecord::Base\n  has_and_belongs_to_many :plagues\n  belongs_to :budget_model\n  belongs_to :model_plague_group\n  has_many :budget_model_details\n\n  def plague_tags\n    plagues_tag = []\n    plagues.each { |plague| plagues_tag << plague.tec_name }\n    plagues_tag.join(',')\n  end\n\n  def plague_description\n    plagues_tag = []\n    plagues.each { |plague| plagues_tag << plague.tec_name }\n    plagues_tag.join(' ')\n  end\n\n  def full_clone\n    _clone = self.dup\n  end\n\n  def option_selected_description\n    description = 'No aceptado'\n    if self.option_selected\n      description = 'Solo tratamiento inicial' if self.option_selected == 'SM'\n      description = 'Mantenimiento' if self.option_selected == 'CM'\n      description = 'Abono' if self.option_selected == 'AA'\n    end\n    description\n  end\nend\n","markerStore":{"nextMarkerId":5,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":106,"preserveFolds":true,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":2,"nextCheckpointId":2,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/omar/workspace/xinamon/ihouse/app/models/budget_model_plague_group.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"91df5a422501809786b7fbdd4b28631c41ab6551","deserializer":"TextBuffer","version":2},{"text":"class BudgetsController < ApplicationController\n\n  include BudgetsHelper\n\n  before_action :set_budget, only: [:show, :edit, :update, :destroy, :create]\n\n  def sendBudget\n\n    @budget = Budget.find(params[:budget_id])\n    @budget.budget_state = BudgetState.find_by_name('PAC')\n\n    output = BudgetReport.new(:page_size => 'A4')\n    output.package_to_pdf(@budget)\n    output.create_pdf('pdf_test')\n\n    #send_data(output.render, filename: \"Budget.pdf\", :disposition => \"inline\")\n    Mailer.budget_information('public/reports/pdf_test',params[:email]).deliver\n\n    @budget.save\n\n    search_budgets\n    render :partial => 'budgets_notifications'\n\n\n  end\n\n  def download_report\n    @budget = Budget.find(params[:budget_id])\n    output = BudgetReport.new(:page_size => 'A4')\n\n    output.package_to_pdf(@budget)\n    output.create_pdf('pdf_test')\n\n    respond_to do |format|\n      format.pdf do\n        # Download\n        #send_data(output.render, filename: \"public/reports/pdf_test.pdf\", type: \"application/pdf\")\n        # Display in page\n        send_data(output.render, filename: \"public/reports/pdf_test.pdf\", :disposition => \"inline\")\n      end\n    end\n  end\n\n  # GET /budgets\n  # GET /budgets.json\n  def index\n\n    Budget.where(\"budget_state_id is ?\",nil).delete_all\n\n    if params[:state].present?\n      @budgets = Budget.by_state_id(params[:state])\n      if params[:name].present?\n        @budgets = @budgets.by_client_name(params[:name])\n      elsif params[:nro].present?\n        @budgets = @budgets.where(\"id = ?\", params[:nro])\n      end\n      @budgets = @budgets.order(\"id desc\").limit(50)\n    elsif params[:name].present?\n      @budgets = Budget.by_client_name(params[:name]).order(\"id desc\").limit(50)\n    elsif params[:nro].present?\n      @budgets = Budget.where(\"id = ?\", params[:nro])\n    else\n      @budgets = Budget.order(\"id desc\").limit(50)\n    end\n  end\n\n  # GET /budgets/1\n  # GET /budgets/1.json\n  def show\n  end\n\n  # GET /budgets/new\n  def new\n    @budget = Budget.new\n    if params[:address_id]\n      @budget.address = Address.find(params[:address_id])\n      @previous_budgets = Budget.accepted.last_address_budgets(params[:address_id])\n    end\n    @budget.save\n  end\n\n  # GET /budgets/1/edit\n  def edit\n    @budget = Budget.find(params[:id])\n    @models = Model.all.order(:name)\n  end\n\n  # POST /budgets\n  # POST /budgets.json\n  def create\n\n    @budget.budget_state = BudgetState.first\n\n    respond_to do |format|\n      if @budget.save\n        format.html { redirect_to root_path, notice: 'Budget was successfully created.' }\n        format.json { render action: 'show', status: :created, location: @budget }\n      else\n        format.html { render action: 'new' }\n        format.json { render json: @budget.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /budgets/1\n  # PATCH/PUT /budgets/1.json\n  def update\n    respond_to do |format|\n\n      if @budget.budget_state.blank?\n        @budget.budget_state = BudgetState.find_by_name('PRES')\n\n      elsif @budget.pending_client_accept?\n        ### Presupuesto que pasa a Aceptado\n        process_pending_client_accept(@budget,params)\n      else\n\n        if @budget.budget_state.name == 'TEC'\n          @budget.budget_state = BudgetState.find_by_name('PVR')\n          unless params[:budget][:model].blank?\n            @budget.budget_model = Model.find(params[:budget][:model]).create_budget_model(false,false)\n          end\n        end\n        if @budget.budget_state.name == 'POT'\n          @budget.budget_state = BudgetState.find_by_name('ACEP')\n        end\n\n        if params[\"budget\"][\"model_detail\"]\n          _budget_model_details = create_budget_model_details(params[\"budget\"][\"model_detail\"])\n          @budget.budget_model.budget_model_details = _budget_model_details\n        end\n\n        if params['bmpg']\n          update_budget_model_plague_groups(params['bmpg'],@budget.budget_model)\n        end\n\n        unless @budget.budget_state.name == 'PRES'\n\n          if params[\"budget\"][\"discount\"]\n            @budget.discount_initial_service = params[\"budget\"][\"discount\"][\"discount_initial_service\"]\n            @budget.discount_maintenance = params[\"budget\"][\"discount\"][\"discount_maintenance\"]\n            @budget.discount_initial_service_note = params[\"budget\"][\"discount\"][\"discount_initial_service_note\"]\n            @budget.discount_maintenance_note = params[\"budget\"][\"discount\"][\"discount_maintenance_note\"]\n          end\n\n          @budget.budget_model.person = params[\"budget\"][\"person\"] if params[\"budget\"][\"person\"]\n          @budget.budget_model.hours = params[\"budget\"][\"hours\"] if params[\"budget\"][\"hours\"]\n          @budget.budget_model.observations = params[\"budget\"][\"description\"] if params[\"budget\"][\"description\"]\n\n          if params[\"budget_model\"]\n            @budget.budget_model.methodology = params[\"budget_model\"][\"methodology\"] if params[\"budget_model\"][\"methodology\"]\n            @budget.budget_model.bonification = params[\"budget_model\"][\"bonification\"] if params[\"budget_model\"][\"bonification\"]\n          end\n\n          @budget.budget_model.save\n        end\n\n        if @budget.budget_state.name == 'PRES'\n          @budget.budget_state = BudgetState.find_by_name('TEC')\n        end\n\n      end\n      saved = @budget.update(budget_params)\n\n      if\n        format.html { redirect_to notifications_path, notice: 'El presupuesto fue actualizado correctamente.' }\n        format.json { head :no_content }\n      else\n        format.html { render action: 'edit' }\n        format.json { render json: @budget.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /budgets/1\n  # DELETE /budgets/1.json\n  def destroy\n    @budget.destroy\n    respond_to do |format|\n      format.html { redirect_to budgets_url }\n      format.json { head :no_content }\n    end\n  end\n\n  def add_plague_area\n   @budget = Budget.find(params[:budget_id])\n\n   plague_area = PlagueArea.new\n   plague_area.area = params[:area]\n\n   plague_area.plague_description = params[:plague_description]\n   plague_area.budget = @budget\n   plague_area.save\n\n   render :partial => 'plague_areas_step1'\n  end\n\n  def delete_plague_area\n\n   plague_area = PlagueArea.find(params[:plague_area_id])\n   @budget = Budget.find(params[:budget_id])\n\n   if plague_area\n    @budget.plague_area.delete(plague_area)\n    plague_area.delete\n  end\n\n   render :partial => 'plague_areas_step1'\n  end\n\n  def add_plague_area_group\n\n    budget_model_plague_group = BudgetModelPlagueGroup.find(params[:budget_model_plague_group_id])\n    _clone = budget_model_plague_group.dup\n    _clone.plagues = budget_model_plague_group.plagues\n    _clone.save\n\n    @budget = Budget.find(params[:budget_id])\n\n    render :partial => 'budgets/model_plague_groups'\n  end\n\n  def budget_to_technical\n    @budget = Budget.find(params[:budget_id])\n    @budget.budget_state = BudgetState.find_by_name('TEC')\n    @budget.save\n\n    search_budgets\n    render :partial => 'budgets_notifications'\n  end\n\n  def approve_report\n    @budget = Budget.find(params[:budget_id])\n    @budget.budget_state = BudgetState.find_by_name('PEN')\n    @budget.save\n\n    search_budgets\n    render :partial => 'budgets_notifications'\n  end\n\n  def budget_to_sent\n    @budget = Budget.find(params[:budget_id])\n    @budget.budget_state = BudgetState.find_by_name('PAC')\n    @budget.save\n\n    search_budgets\n    render :partial => 'budgets_notifications'\n  end\n\n\n\n  def select_model\n    @budget = Budget.find(params[:budget_id])\n    model_selected = Model.find(params[:model_selected])\n\n    @budget.budget_model = model_selected.create_budget_model(true,true)\n    @budget.save\n\n    render :partial => 'model_selected'\n  end\n\n  private\n\n    def search_budgets\n      @budgets = Budget.budgted\n      @technical_budgets = Budget.technical\n      @sent_budgets = Budget.sent\n      @pending_send_budgets = Budget.pending_send\n      @pending_ot_budgets = Budget.pending_ot\n      @pending_approve_report = Budget.pending_report\n\n      if current_user.has_role? :vendedor\n        @budgets = @budgets.seller_me current_user.id\n        @technical_budgets = @technical_budgets.seller_me current_user.id\n        @sent_budgets = @sent_budgets.seller_me current_user.id\n      end\n    end\n\n    # TODO. Ver de hacer el update directamente como un hash\n    # TODO. Modificar ya que pueden llegar bmpg que aun no estan cargados\n    #       ya que \"Agregar linea\" se hace por JS\n    def update_budget_model_plague_groups(bmpg_hash,budget_model)\n      bmpg_hash.keys.each do |budget_model_plague_group_id|\n        bmpg = BudgetModelPlagueGroup.find(budget_model_plague_group_id.to_i)\n        bmpg.areas = bmpg_hash[budget_model_plague_group_id][\"areas\"]\n        bmpg.price_initial_phase = bmpg_hash[budget_model_plague_group_id][\"price_initial_phase\"]\n        bmpg.price_maintenance = bmpg_hash[budget_model_plague_group_id][\"price_maintenance\"]\n\n        # Plagues information\n        if bmpg_hash[budget_model_plague_group_id][\"plagues\"]\n          bmpg.plagues = []\n          bmpg_hash[budget_model_plague_group_id][\"plagues\"].keys.each do |bmpg_plagues|\n            bmpg.plagues << Plague.find(bmpg_plagues.to_i)\n          end\n        end\n\n        bmpg.budget_model = budget_model\n        bmpg.save\n      end\n    end\n\n    # Use callbacks to share common setup or constraints between actions.\n    def set_budget\n      @budget = Budget.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def budget_params\n      params.require(:budget).permit(:address_id, :contact_id, :price, :decimal, :discount, :decimal, :budget_state_id,\n                                     :visit_date, :visit_day_time, :visit_date_observation, :visit_date_observation, :seller_id, :notes)\n    end\nend\n","markerStore":{"nextMarkerId":22,"markersById":{"0":{"range":{"start":{"row":219,"column":45},"end":{"row":219,"column":45}},"properties":{"type":"selection","editorId":118,"goalScreenRange":null,"preserveFolds":true},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"1":{"range":{"start":{"row":162,"column":0},"end":{"row":162,"column":43}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"2":{"range":{"start":{"row":205,"column":0},"end":{"row":205,"column":5}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"20":{"range":{"start":{"row":162,"column":0},"end":{"row":162,"column":43}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"21":{"range":{"start":{"row":205,"column":0},"end":{"row":205,"column":5}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":2,"nextCheckpointId":2,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/omar/workspace/xinamon/ihouse/app/controllers/budgets_controller.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"e4a947d882932dc107323828caaeee1dc569425f","deserializer":"TextBuffer","version":2}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":3,"items":[{"id":4,"softTabs":true,"displayBuffer":{"id":5,"softWrapped":false,"scrollTop":26,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/omar/workspace/xinamon/ihouse/app/reports/budget_report.rb","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":106,"softTabs":true,"displayBuffer":{"id":107,"softWrapped":false,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/omar/workspace/xinamon/ihouse/app/models/budget_model_plague_group.rb","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":118,"softTabs":true,"displayBuffer":{"id":119,"softWrapped":false,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/omar/workspace/xinamon/ihouse/app/controllers/budgets_controller.rb","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"}],"activeItemURI":"/Users/omar/workspace/xinamon/ihouse/app/reports/budget_report.rb","focused":true,"flexScale":1,"deserializer":"Pane"},"activePaneId":3,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-ruby","language-hyperlink","language-todo"],"deserializer":"Workspace"},"packageStates":{"fuzzy-finder":{"/Users/omar/workspace/xinamon/ihouse/app/reports/budget_report.rb":1435631156629,"/Users/omar/workspace/xinamon/ihouse/app/models/budget_model_plague_group.rb":1435011693513,"/Users/omar/workspace/xinamon/ihouse/app/controllers/budgets_controller.rb":1435011641938},"keybinding-resolver":{},"metrics":{"sessionLength":27803},"tabs":[{}],"tree-view":{"directoryExpansionStates":{"/Users/omar/workspace/xinamon/ihouse":{"isExpanded":true,"entries":{".bundle":{"isExpanded":false,"entries":{}},".git":{"isExpanded":false,"entries":{}},"app":{"isExpanded":true,"entries":{"assets":{"isExpanded":false,"entries":{}},"controllers":{"isExpanded":true,"entries":{"concerns":{"isExpanded":false,"entries":{}}}},"helpers":{"isExpanded":false,"entries":{}},"mailers":{"isExpanded":false,"entries":{}},"models":{"isExpanded":true,"entries":{"concerns":{"isExpanded":false,"entries":{}}}},"reports":{"isExpanded":true,"entries":{}},"views":{"isExpanded":false,"entries":{}}}},"bin":{"isExpanded":false,"entries":{}},"config":{"isExpanded":false,"entries":{}},"db":{"isExpanded":false,"entries":{}},"install":{"isExpanded":false,"entries":{}},"lib":{"isExpanded":false,"entries":{}},"log":{"isExpanded":false,"entries":{}},"public":{"isExpanded":false,"entries":{}},"test":{"isExpanded":false,"entries":{}},"tmp":{"isExpanded":false,"entries":{}},"vendor":{"isExpanded":false,"entries":{}}}}},"selectedPath":"/Users/omar/workspace/xinamon/ihouse/app/reports/budget_report.rb","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":332},"find-and-replace":{"viewState":"","modelState":{"useRegex":false,"inCurrentSelection":false,"caseSensitive":false,"wholeWord":false},"projectViewState":"","resultsModelState":{"useRegex":false,"caseSensitive":false},"findHistory":["write_document(budget)","3","forma de","write_budget_model_plague_group","to_pdf","report","init","ini","write_budget_model_plague_group","group"],"replaceHistory":[],"pathsHistory":[]}}}